<?xml version="1.0" encoding="utf-8"?>
<s:Group xmlns:fx="http://ns.adobe.com/mxml/2009" 
		 xmlns:s="library://ns.adobe.com/flex/spark" 
		 xmlns:mx="library://ns.adobe.com/flex/mx" 
		 xmlns:categorylist="org.mxhero.console.commons.component.categorylist.*" 
		 width="100%" 
		 resize="{calculateRows()}" 
		 mouseMove="{model.selectedCategory=category}">
	<fx:Declarations>
		<!-- Place non-visual elements (e.g., services, value objects) here -->
	</fx:Declarations>
	
<fx:Script>
	<![CDATA[
		
		[Bindable]
		public var model:CategoryListPM;
		
		[Bindable]
		public var category:Object;
		
		private function calculateRows():void{
			var newRows:Number = Math.ceil((childsContainer.numElements*(childsContainer.columnWidth+30))/(width-categoryContainer.width-30));
			if(newRows>childsContainer.numElements){
				newRows=childsContainer.numElements;
			} 
			if(newRows!=childsContainer.requestedRowCount){
				childsContainer.requestedRowCount=newRows;
			}
		}

	]]>
</fx:Script>
	<s:layout>
		<s:HorizontalLayout verticalAlign="middle" paddingRight="20" paddingTop="20" gap="30"/>
	</s:layout>
	<categorylist:Category id="categoryContainer" model="{model}" category="{category}"/>
	<categorylist:CategoryChilds id="childsContainer"  model="{model}" links="{category.childs}" />
</s:Group>
